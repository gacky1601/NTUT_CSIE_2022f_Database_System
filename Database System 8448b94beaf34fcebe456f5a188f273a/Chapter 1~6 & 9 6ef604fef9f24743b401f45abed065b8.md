# Chapter 1~6 & 9

[Database System](../Database%20System%208448b94beaf34fcebe456f5a188f273a.md)

# Chap 1 Databases and Database Users

## DBMS(è³‡æ–™åº«ç®¡ç†ç³»çµ±)

ä¸€ç¨®èƒ½è®“ä½¿ç”¨è€…å»ºç«‹èˆ‡ç¶­è­·è³‡æ–™åº«çš„ç¨‹å¼é›†åˆ

å”åŠ©å„ç¨®æ‡‰ç”¨ç¨‹å¼èˆ‡ä½¿ç”¨è€…â€**å®šç¾©ã€å»ºæ§‹ã€è™•ç†ã€å…±äº«â€**è³‡æ–™åº«

é˜»æ­¢æœªæˆæ¬Šçš„å­˜å–

æ ¹æ“šä½¿ç”¨è€…éœ€æ±‚è¨‚è£½è³‡æ–™åº«

**Database Approach (è³‡æ–™åº«æŠ€è¡“ç‰¹æ€§)å„ªé»**

- è‡ªæˆ‘æè¿°(Self-describing)
- è³‡æ–™æŠ½è±¡åŒ–(data abstraction)
- å¤šé‡è¦–ç•Œ(mutiple views)
- è³‡æ–™å…±äº«èˆ‡å¤šä½¿ç”¨è€…çš„äº¤æ˜“è™•ç†(transaction processing)
- æ”¯æ´å¤šç¨®æª¢è¦–(view)æ–¹å¼(Supports mutiple views of the data)

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled.png)

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%201.png)

![55D6ABC4-68BB-44EE-8303-4C227B88D7F1.png](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/55D6ABC4-68BB-44EE-8303-4C227B88D7F1.png)

### è©®é‡‹è³‡æ–™(**meta-data**)

æè¿°ä¸»è¦è³‡æ–™åº«çš„çµæ§‹ï¼Œä»¥ç›®éŒ„æˆ–å­—å…¸çš„å½¢å¼å„²å­˜åœ¨è³‡æ–™åº«ä¸­ã€‚

Catalog (ç›®éŒ„)ï¼šç”¨ä¾†æè¿°è³‡æ–™çš„è³‡æ–™

1. è¨˜éŒ„æ¯ç­†è³‡æ–™çš„å‹æ…‹èˆ‡å„²å­˜æ ¼å¼ e.g. Name char(10)
2. Schema

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%202.png)

### Database System Adventage

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%203.png)

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%204.png)

# Chap 2 Database System Concepts
and Architecture

### Data Model

ä¸€äº›æè¿°è³‡æ–™åº«çš„çµæ§‹ã€ä»¥åŠæ“ä½œé€™äº›ç¯€çš„æ–¹æ³•ä»¥åŠè³‡æ–™æ¨¹éœ€è¦éµå®ˆçš„é™åˆ¶

æä¾›è³‡æ–™æŠ½è±¡åŒ–(è®“ä½¿ç”¨è€…åˆé–‹ç™¼è€…éƒ½èƒ½æ‡‚å„è‡ªçš„æ•˜è¿°)

### ä¸‰å±¤æ¶æ§‹ Three-Schema Architecture

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%205.png)

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled.jpeg)

ç”±ä¸Šå±¤åˆ°ä¸‹å±¤ï¼Œä¸Šå±¤æ¥è¿‘ä½¿ç”¨è€…ï¼Œä¸‹å±¤æ¥è¿‘ç¡¬é«”

- å¤–éƒ¨å±¤(external level)
    
    ä½¿ç”¨è€…çš„ä»‹é¢ç«¯èƒ½çœ‹åˆ°çš„æ±è¥¿
    
- æ¦‚å¿µå±¤(conceptual level)
    
    åŸºç¤è¡¨æ ¼ï¼Œçœ‹èµ·ä¾†åƒæ˜¯excelè¡¨æ ¼
    
- å…§éƒ¨å±¤(internal level)
    
    çœŸæ­£çš„å„²å­˜çµæ§‹ï¼Œé¢å°çš„ç¡¬é«”æ¶æ§‹
    
    æˆ‘å€‘ç”¨ç¨‹å¼ç¢¼å¯¦ä½œå°±æ˜¯ä¸€ç¨®ä¾‹å­
    

| DDL(è³‡æ–™å®šç¾©èªè¨€) |  |  |
| --- | --- | --- |
| å¤–éƒ¨æ¶æ§‹ 
external schema | æ¦‚å¿µæ¶æ§‹
conceptual schemas | å…§éƒ¨æ¶æ§‹
Internal schemas |

| DML (è³‡æ–™è™•ç†èªè¨€) |  |  |  |
| --- | --- | --- | --- |
| æ’å…¥insertion | åˆªé™¤deletion | æŸ¥è©¢retrieval | ä¿®æ”¹modification |

### Data Modelsåˆ†é¡

**Conceptual (high-level, semantic) data models**

åŒ…å«ï¼šçœŸå¯¦ä¸–ç•Œçš„ä¸»é«”ä»¥åŠä¸»é«”é–“çš„é—œä¿‚

ä¹Ÿç¨±ç‚ºentity-based or object-based data models

**Physical (low-level, internal) data models:**

è‘—é‡åœ¨è³‡æ–™çš„å„²å­˜æ–¹å¼ï¼Œé€šå¸¸è¢«å®šç¾©åœ¨DBMSçš„è¨­è¨ˆå…§ã€ç®¡ç†è€…å®ˆå‰‡

**Implementation (representational) data models:**

å¯¦ä½œå‡ºæ¦‚å¿µå±¤èˆ‡å¯¦é«”å±¤ä¹‹é–“çš„æ¦‚å¿µ

e.g. relational data models

**Self-Describing Data Models:**

çµåˆè³‡æ–™æè¿°ä»¥åŠè³‡æ–™

å¯ä»¥è‡ªè¡Œè¡¨é”å®Œæ•´çš„è³‡æ–™åŠé—œä¿‚

e.g. XML, key-value stores ,NOSQL systems

### **Database Schema &  Database State**

**Database Schema(Intension)**

The description of a database. 

åŒ…å«database structure,data types,constraints 

**Relation Schema or Schema Diagramâ†’**

å¤§å¤šæ•¸çš„é—œä¿‚ç„¡æ³•åœ¨æ­¤åœ–è¡¨ä¸­è¡¨ç¤º

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%206.png)

**Database State(Extension)**

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%207.png)

## Data Independence

è³‡æ–™ç¨ç«‹çš„åˆ†é¡ï¼š

- é‚è¼¯è³‡æ–™ç¨ç«‹(Logical Data Independence)ï¼š ä¿®æ”¹**æ¦‚å¿µç¶±è¦(Conceptual Schema)**æ™‚ï¼Œä¸éœ€è¦ä¿®æ”¹å¤–éƒ¨ç¶±è¦èˆ‡æ‡‰ç”¨ç¨‹å¼çš„èƒ½åŠ›
- å¯¦é«”è³‡æ–™ç¨ç«‹(Physical Data Independence)ï¼š ä¿®æ”¹**å…§éƒ¨ç¶±è¦(External Schema)**æ™‚ï¼Œä¸éœ€è¦ä¿®æ”¹æ¦‚å¿µç¶±è¦çš„èƒ½åŠ›ï¼Œ å› æ­¤ä¹Ÿä¸æœƒæ”¹åˆ°å¤–éƒ¨ç¶±è¦

é‚è¼¯è³‡æ–™ç¨ç«‹æ€§æ¯”è¼ƒä¸å®¹æ˜“é”åˆ°

å› ç‚ºå®ƒå…è¨±è®Šæ›´çµæ§‹å’Œé™åˆ¶è€Œä¸”ä¸æœƒå½±éŸ¿æ‡‰ç”¨ç¨‹å¼ï¼Œé€™å€‹é™åˆ¶è¦ä¾†çš„åš´æ ¼è¨±å¤šã€‚

# Chap 3 Data Modeling Using the
Entity-Relationship (ER) Model

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%208.png)

- Keyçš„å·®ç•°ï¼š
    - Super Keyï¼šç”±é—œè¯ä¸­çš„ä¸€å€‹æˆ–å¤šå€‹çš„å±¬æ€§æ‰€æ§‹æˆã€å…·æœ‰å”¯ä¸€è­˜åˆ¥æ€§çš„å±¬æ€§é›†åˆã€‚
        - å€™é¸éµï¼šå¯ç‚ºNULLï¼Œæ˜¯æœ€å°‘å±¬æ€§é›†åˆçš„è¶…éµã€‚
            - Unique keyï¼šå¯ç‚ºNULLï¼Œå¯ä»¥ç¨±ç‚ºæ¬¡è¦éµã€‚
            - Primary keyï¼šå€¼çµ„æ˜¯å”¯ä¸€çš„(Ex:åœ¨è³‡æ–™åº«ä¸­å­¸è™Ÿæ˜¯å”¯ä¸€ï¼Œä¸æœƒé‡è¤‡)
        - Foreign key(å¤–éƒ¨)ï¼šä¸å…·å”¯ä¸€æ€§ï¼Œå¯ç‚ºNULLï¼ŒæŒ‡å®šåœ¨2å€‹é—œè¯ä¹‹é–“ï¼Œç”¨ä¾†ä¿æŒ2å€‹é—œè¯å€¼çµ„çš„ä¸€è‡´æ€§
    - Relationship model(é—œä¿‚æ¨¡å‹)ï¼šæ•´å€‹ER modelä¸Šçš„é—œä¿‚(å±¬æ€§)
    - Attribute(å±¬æ€§)ï¼šæŸå€‹æè¿°å¯¦é«”çš„é‡è¦ç‰¹æ€§
    - Keyï¼šä»»å…© tuple çš„keyä¸èƒ½ç›¸åŒï¼Œæ›å¥è©±èªªå°±æ˜¯è¦å”¯ä¸€
    - å®šç¾©åŸŸ(Domain)ï¼šæ˜¯ç”±æŸç¨®è³‡æ–™å‹æ…‹æˆ–è³‡æ–™æ ¼å¼ä¹‹æ‰€æœ‰å¯èƒ½å€¼æ‰€æ§‹æˆçš„é›†åˆ

## æ€éº¼ç•«ER?

å»ºè­°å…ˆæŠŠä¸»é«”è·Ÿé—œä¿‚ç•«å¥½(æ–¹æ–¹)

å†ç•«å±¬æ€§(è±å½¢)

å†é€£ç·š

åœ–ä¾‹ï¼š

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%209.png)

# Chap 4 Enhanced Entity-Relationship
(EER) Modeling

## æ–°å¢æ›´å¤šå…ƒçš„è¡¨ç¤ºæ³•

**Uçš„ç¬¦è™Ÿ**

**ç‰¹æ®ŠåŒ–Specialization(ç®­é ­åœ¨ä¸‹ï¼‰**

**Overlap(é‡ç–Šã€åŒ…å«)**

![D5838FED-F3D9-4B58-9ACF-F19B36C99020.png](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/D5838FED-F3D9-4B58-9ACF-F19B36C99020.png)

**Deriveï¼ˆè¡ç”Ÿï¼‰**

![Untitled](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/Untitled%2010.png)

**ä¸€èˆ¬åŒ–Normalizationï¼ˆç®­é ­åœ¨ä¸Šï¼‰**

**Union(è¯é›†)**

# Chap 5 The Relational Data Model and
Relational Database Constraints

æ­£è¦åŒ–(å¾…è£œ)æœŸä¸­ä¸æœƒè€ƒ

## Database Constraints(è³‡æ–™åº«é™åˆ¶)

**å…§é¡¯é™åˆ¶**ï¼ˆè³‡æ–™æ¨¡å‹æœ¬èº«çš„è¦å®šï¼‰

e.g.åŒä¸€å€‹æ¬„ä½ä¸èƒ½æœ‰å…©ç­†è³‡æ–™

**ç¶±è¦å¼é™åˆ¶(å¤–é¡¯é™åˆ¶)(DDLä¹Ÿæ˜¯å¤–é¡¯)**

**Entity Integrity Constraint (å€‹é«”å®Œæ•´æ€§é™åˆ¶)**

PKä¸èƒ½æ˜¯Null

**Referential Integrity Constraint (åƒè€ƒå®Œæ•´æ€§é™åˆ¶)**

FKåƒç…§åˆ°å…¶ä»–PK

**casecading update(ç´šè¯æ›´æ–°)

**Key constraint (éµå€¼é™åˆ¶)**

keyä¸èƒ½åœ¨å…©tupleé–“é‡è¤‡å‡ºç¾ï¼Œä¸”keyç‚ºæœ€å°‘å±¬æ€§é›†åˆçš„superKey

**Domain constraint (å®šç¾©åŸŸé™åˆ¶)**

æ¯å€‹å±¬æ€§å€¼éœ€åˆä¹è©²å±¬æ€§ä¹‹å®šç¾©åŸŸç¯„åœ

**Constraint on NULL Values** 

æ˜¯å¦èƒ½è¼¸å…¥null (æ ¹æ“šä½¿ç”¨è€…æ±ºå®š)

**è‹¥è§¸çŠ¯ä»¥ä¸Šé™åˆ¶æœ‰ä¸‰ç¨®è§£æ³•ï¼š**

- é€£å¸¶åˆªé™¤ã€é€£å¸¶æ›´æ–°(Casecading Update)
- ç©ºå€¼åŒ–
- é™åˆ¶æ“ä½œ

# Chap 6 Basic SQL

- SELECTï¼šå¾Œé¢æ¥å±¬æ€§åç¨±çš„æ¸…å–®ï¼Œåœ¨æŸ¥è©¢æ™‚éœ€è¦åƒè€ƒé€™äº›å±¬æ€§çš„å€¼(è³‡æ–™è¡¨çš„æ¬„)
FROMï¼šåˆ—å‡ºåœ¨è™•ç†æŸ¥è©¢æ™‚éœ€è¦ç”¨åˆ°çš„é—œè¯åç¨±(è³‡æ–™è¡¨)
WHEREï¼šæ¢ä»¶é‹ç®—å¼ï¼Œç”¨ä¾†è­˜åˆ¥æŸ¥è©¢æ™‚æ‰€è¦æ“·å–çš„å€¼çµ„(æ¢ä»¶)
- INSERT	INTO	è³‡æ–™è¡¨(æ¬„ä½åç¨±,)	VALUES(å€¼)
- INSERT	INTO	è³‡æ–™è¡¨(æ¬„ä½åç¨±,)	VALUES(å€¼)
- DELETE	FROM	è³‡æ–™è¡¨(æ¬„ä½åç¨±,)	WHERE å“ªä¸€ç­†
- UPDATE	è³‡æ–™è¡¨	SET(æ”¹æˆä»€éº¼)	WHERE å“ªä¸€ç­†è¦æ›´æ”¹

**SQLä¸­ç‰¹æ®Šå­—å…ƒï¼š**

| * | ä»£è¡¨æ‰€æœ‰å±¬æ€§ |
| --- | --- |
| % | å¯ä»¥å–ä»£ä»»æ„æ•¸ç›®çš„å­—å…ƒ |
| _ | å–ä»£å–®ä¸€å­—å…ƒ |

SQL Command Example:

- Insert a new student, <20, 'Eric', 1, ' CS' > in the database. Assume that the value sets of the attributes StudentNumber and Class are {1,2,â€¦,80} and {1,2,â€¦,10}, respectively.

```sql
INSERT INTO STUDENT (StudentNumber,Name,Class,Major) 
VALUE ('20', 'Eric', '1', 'CS')
```

- Change the class of student 'Danny' to 2.

```sql
UPDATEÂ  STUDENT Â SETÂ ClassÂ =Â '2' 
WHEREÂ  `Name`Â = 'Danny'
```

- Insert a new course <'CS4105', 'Database Systems', 3, 'CS'>.

```cpp
INSERT INTO COURSE (CourseNumber, CouserName, CreditHours, Depatment) 
VALUE (CS4105, Database Systems, 3, "CS")
```

- Delete the record for the student whose name is 'Eric' and whose student number is 20.

```sql
DELETE FROM STUDENT
WHERE Name = Eric 
  AND StudentNumber = 20
```

- Retrieve the numbers and names of all students majoring in 'CS'.

```sql
SELECTÂ StudentNumberÂ ,Â Name`  
FROMÂ STUDENT 
WHEREÂ STUDENT.MajorÂ =Â 'CS'
```

- Retrieve the names of all courses taught by Professor 'Cheng' in years 2010 and 2012.

```sql
SELECT `COURSE`.`CourseName`
FROM `COURSE`, `SECTION`
WHERE `COURSE`.`CourseNumber` = `SECTION`.`CourseNumber`
	AND `SECTION`.`Instructor` = 'Cheng'
	AND (`SECTION`.`Year` = '2010' OR `SECTION`.`Year` = '2012')
```

- For each section taught by Professor 'Lin', retrieve the course number, semester, year, and the number of students who took the section.æœå°‹æ—æ•™æˆçš„æˆèª²å­¸ç”Ÿæ•¸

```sql
SELECTÂ `COURSE`.`CourseNumber`Â ,Â `SECTION`.`Semester`Â ,Â `SECTION`.`Year`Â ,Â COUNT(Â `STUDENT`.`StudentNumber`Â )Â  
FROMÂ `STUDENT`Â ,Â `SECTION`Â ,Â `GRADE_REPORT`Â ,Â `COURSE`Â  WHEREÂ `STUDENT`.`StudentNumber`Â =Â `GRADE_REPORT`.`StudentNumber`Â  
			ANDÂ `GRADE_REPORT`.`SectionIdentifier`Â =Â `SECTION`.`SectionIdentifier`Â  ANDÂ `SECTION`.`CourseNumber`Â =Â `COURSE`.`CourseNumber`Â  
			ANDÂ `SECTION`.`Instructor`Â =Â 'Lin' GROUPÂ BYÂ (`COURSE`.`CourseNumber`)
```

- Retrieve the name and transcript of each freshman student (Class=1) majoring in 'CS'. A transcript includes course number, course name, credit hours, semester, year, and grade for each course completed by the student. è¦æœå°‹ä¸€å¹´ç´š&ä¸»ä¿®CSçš„å­¸ç”Ÿåå­—

```sql
SELECT STUDENT.Name , COURSE.CourseNumber , COURSE.CourseName , COURSE.CreditHours , SECTION.Semester ,SECTION .Year , GRADE_REPORT.Grade  
FROM 'STUDENT' , 'COURSE' , 'SECTION' , 'GRADE_REPORT'  
WHERE 'STUDENT'.'Class' = '1' 
	AND 'STUDENT'.'Major' = 'CS' 
	AND 'STUDENT'.'StudentNumber' = 'GRADE_REPORT'.'StudentNumber'  
	AND 'GRADE_REPORT'.'SectionIdentifier' = 'SECTION'.'SectionIdentifier'  
	AND 'SECTION'.'CourseNumber' = 'COURSE'.'CourseNumber'
```

### **è€ƒé¡Œç¯„ä¾‹**

![7C1D21FB-B35E-497C-B198-E8B5FE35C876.png](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/7C1D21FB-B35E-497C-B198-E8B5FE35C876.png)

![C4765D33-80F9-4A19-8290-9B8A9B61DCA9.png](Chapter%201~6%20&%209%206ef604fef9f24743b401f45abed065b8/C4765D33-80F9-4A19-8290-9B8A9B61DCA9.png)

# Chap 9 Relational Database Design by ER- and
EER-to-Relational Mapping

- ERåœ–ï¼šå¸¸ç”¨çš„é«˜éšæ¦‚å¿µè³‡æ–™æ¨¡å‹ï¼Œç¨±ç‚ºå¯¦é«”é—œä¿‚æ¨¡å‹
- å¯¦é«”å‹æ…‹åç¨±ï¼šçŸ©å½¢æ–¹å¡Š
    - é—œä¿‚å‹æ…‹ï¼šè±å½¢(1ï¼š1ï¼Œ1ï¼š Nï¼ŒNï¼š1ï¼ŒNï¼šM)
    - é›™çŸ©å½¢ï¼šç‚ºäº†å€åˆ†å’Œä¸€èˆ¬å¯¦é«”çš„é—œä¿‚ï¼Œä»¥é›™è±å½¢ä¾†è¡¨ç¤ºå¯¦é«”èˆ‡ã€Œå¼±å¯¦é«”ã€é–“çš„é—œä¿‚
- å±¬æ€§ï¼šæ©¢åœ“å½¢
    - å¤šç›´å±¬æ€§ï¼šé›™æ©¢åœ“å½¢
- Keyå€¼ï¼šåŠ åº•ç·š
- å…¨ç¨‹åƒèˆ‡ä»¥é›™ç·šè¡¨ç¤ºï¼Œéƒ¨åˆ†åƒèˆ‡ä»¥å–®ç·šè¡¨ç¤º
- å¼±å¯¦é«”(Weak entity)ï¼šå°±æ˜¯å¿…é ˆä¾é å…¶ä»–ã€Œå¯¦é«”ã€æ‰èƒ½å­˜åœ¨
- éƒ¨åˆ†é—œéµ(Partial key)ï¼šè™›ç·š

# Midterm

åŠ æ²¹!! ğŸ’—